[hydra](https://github.com/micro-plat/hydra)å¾®æœåŠ¡å®¹å™¨
======================
åŸºäºgolangå®ç°ã€‚

hydra æä¾›ç®€å•çš„ã€ç»Ÿä¸€çš„ã€æ˜“æ‰©å±•çš„æœåŠ¡å®¹å™¨æ¡†æ¶ã€‚é€šè¿‡å°‘é‡çš„ä»£ç é›†æˆï¼Œå³å¯å®ç°çš„ä¸°å¯ŒåŠŸèƒ½ï¼Œå¦‚ï¼šé›†ç¾¤ç®¡ç†ã€é…ç½®ç®¡ç†ã€æœåŠ¡æ³¨å†Œä¸å‘ç°ã€ç³»ç»Ÿç›‘æ§ã€æ—¥å¿—å½’é›†ã€é“¾è·¯è¿½è¸ªã€å®‰å…¨è®¿é—®ã€å¸¸ç”¨ç»„ä»¶ç­‰ã€‚

ç›®å‰å·²åº”ç”¨äº50+ç”Ÿäº§é¡¹ç›®ï¼Œä¸»è¦åŠŸèƒ½ï¼š
ç¤ºä¾‹é¡¹ç›®ï¼š[äº§ç ”ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ](https://gitee.com/emshop/workspace/)


- #### âœ“  å…­ç±»æœåŠ¡
   æ”¯æŒ*API*ã€*WEB*ã€*WEBSOCKET*ã€*RPC*ã€*å®šæ—¶ä»»åŠ¡*ã€*æ¶ˆæ¯æ¶ˆè´¹* ç­‰æœåŠ¡å™¨ï¼Œå¯åœ¨å•ä¸ªåº”ç”¨ä¸­ç»„åˆä½¿ç”¨ã€‚

- #### âœ“ è·¨å¹³å°
    æ”¯æŒwindows, mac, linuxä»¥æœåŠ¡æ–¹å¼å®‰è£…ã€è¿è¡Œã€åœæ­¢ã€å¸è½½ç­‰ã€‚

- #### âœ“ å¤šç§éƒ¨ç½²
  æ”¯æŒåˆ†å¸ƒå¼é›†ç¾¤éƒ¨ç½²ã€å•æœºä¼ªé›†ç¾¤éƒ¨ç½²ã€å•æœºéƒ¨ç½²ã€‚

- #### âœ“ å¤šç§é›†ç¾¤

    æä¾›å¯¹ç­‰ã€åˆ†ç‰‡ã€ä¸»ä»ç­‰é›†ç¾¤æ¨¡å¼ã€‚


- #### âœ“ é…ç½®ç®¡ç†
    é‡‡ç”¨é…ç½®ä¸­å¿ƒï¼Œä¸­å¿ƒåŒ–ç®¡ç†é…ç½®ï¼Œæœ¬åœ°é›¶é…ç½®ã€‚æ”¯æŒzookeeper, redis, æœ¬åœ°æ–‡ä»¶ï¼Œè¿›ç¨‹å†…ç®¡ç†é…ç½®ã€‚

 - #### âœ“ çƒ­æ›´æ–°
    é…ç½®å˜æ›´åè‡ªåŠ¨ç”Ÿæ•ˆï¼Œæ— é¡»æ‰‹åŠ¨é‡å¯æœåŠ¡

- #### âœ“ æ³¨å†Œä¸å‘ç°
    æ”¯æŒzookeeper, etcd, redisç­‰ä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼Œä¸ºè¿œç¨‹è°ƒç”¨æä¾›æœåŠ¡ç®¡ç†ã€‚

- #### âœ“ ä¸šåŠ¡ç›‘æ§

    æ”¯æŒå°†metricä¿¡æ¯(å¦‚ï¼šQPSã€å¤„ç†æ—¶é•¿ã€å“åº”ç­‰)å®šæ—¶ä¸ŠæŠ¥åˆ°influxdbï¼Œç”¨äºç³»ç»Ÿè¿è¡ŒçŠ¶å†µç›‘æ§å¤§å±æ˜¾ç¤ºã€‚

- #### âœ“ é“¾è·¯è·Ÿè¸ª

    æ”¯æŒSkywalkingï¼ŒCatç­‰APMå·¥å…·è¿›è¡Œåˆ†å¸ƒå¼è¿½è¸ªã€æ€§èƒ½æŒ‡æ ‡åˆ†æã€åº”ç”¨å’ŒæœåŠ¡ä¾èµ–åˆ†æã€‚
- #### âœ“ æ—¥å¿—å½’é›†

    æ”¯æŒå°†æœ¬åœ°æ—¥å¿—æäº¤åˆ°æ—¥å¿—å½’é›†æœåŠ¡å™¨( [rlog](https://github.com/micro-plat/rlog))ï¼Œç”¨äºæ—¥å¿—é›†ä¸­æŸ¥è¯¢åˆ†æã€‚

   

- #### âœ“ è®¿é—®æ§åˆ¶
  
    æ”¯æŒç™½åå•ã€é»‘åå•è®¿é—®æ§åˆ¶ï¼ŒBasic Authã€API KEYã€Cookie, JWTç­‰å®‰å…¨éªŒè¯ã€‚
    æ”¯æŒè¿œç¨‹è®¤è¯æœåŠ¡, æä¾›åŠ è§£å¯†ã€éªŒè¯ç­¾ç­‰æœåŠ¡ã€‚

- #### âœ“ æœåŠ¡å™¨é™æµ
    æ”¯æŒæœåŠ¡å™¨é™æµã€é™çº§ã€ç†”æ–­ç­‰æ§åˆ¶ã€‚

- #### âœ“ ç°åº¦å‘å¸ƒ

    æ”¯æŒæ ¹æ®ä¸šåŠ¡è§„åˆ™ç¼–å†™ç°åº¦è„šæœ¬ï¼Œå°†ç”¨æˆ·è¯·æ±‚è½¬å‘åˆ°ä¸åŒé›†ç¾¤ã€‚

- #### âœ“ æä¾›å¸¸ç”¨ç»„ä»¶åº“

    redis,memcached,æ•°æ®åº“ï¼Œmqtt,activeMQ,rpc,uuid,åˆ†å¸ƒå¼é”ï¼Œhttp client,rpc clientç­‰ã€‚


[hydra](https://github.com/micro-plat/hydra)


- [hydraå¾®æœåŠ¡å®¹å™¨](#hydraå¾®æœåŠ¡å®¹å™¨)
  - [ä¸€ã€ç¤ºä¾‹](#ä¸€ç¤ºä¾‹)
  - [äºŒã€ç»„åˆæœåŠ¡](#äºŒç»„åˆæœåŠ¡)
  - [ä¸‰ã€ æœåŠ¡å™¨é…ç½®](#ä¸‰-æœåŠ¡å™¨é…ç½®)
      - [1. è®¾ç½®å¹³å°ã€ç³»ç»Ÿã€é›†ç¾¤åç§°](#1-è®¾ç½®å¹³å°ç³»ç»Ÿé›†ç¾¤åç§°)
      - [2. è¿è¡Œæ—¶ é€šè¿‡cliå‚æ•°æŒ‡å®šå¹³å°ã€ç³»ç»Ÿã€é›†ç¾¤åç§°](#2-è¿è¡Œæ—¶-é€šè¿‡cliå‚æ•°æŒ‡å®šå¹³å°ç³»ç»Ÿé›†ç¾¤åç§°)
      - [3. *API*ç›‘å¬ç«¯å£ï¼š](#3-apiç›‘å¬ç«¯å£)
      - [4. *API*è¶…æ—¶æ—¶é•¿](#4-apiè¶…æ—¶æ—¶é•¿)
      - [5. ç™½åå•ã€é»‘åå•](#5-ç™½åå•é»‘åå•)
      - [6. JWTè®¤è¯](#6-jwtè®¤è¯)
      - [7. ç°åº¦å‘å¸ƒ](#7-ç°åº¦å‘å¸ƒ)
      - [8. è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼](#8-è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼)
      - [9. æ•°æ®åº“é…ç½®](#9-æ•°æ®åº“é…ç½®)
      - [10. ç¼“å­˜é…ç½®](#10-ç¼“å­˜é…ç½®)
  - [å››ã€ æœåŠ¡æ³¨å†Œ](#å››-æœåŠ¡æ³¨å†Œ)
  - [äº”ã€ æœåŠ¡å“åº”](#äº”-æœåŠ¡å“åº”)
    - [ğŸ¿ï¸è”ç³»ä½œè€…](#ï¸è”ç³»ä½œè€…)
    - [ğŸ’²æèµ  ğŸ¥£](#æèµ -)




## ä¸€ã€ç¤ºä¾‹

- ### 1. æ„å»ºAPIæœåŠ¡
```go
package main

import (
    "github.com/micro-plat/hydra"
    "github.com/micro-plat/hydra/hydra/servers/http"
)

func main() {

    //åˆ›å»ºapp
	app := hydra.NewApp(
            hydra.WithPlatName("test"), //å¹³å°å
            hydra.WithSystemName("apiserver"), //ç³»ç»Ÿæˆ–åº”ç”¨å
            hydra.WithServerTypes(http.API),
    )

    //æ³¨å†ŒæœåŠ¡
    app.API("/hello", func(ctx hydra.IContext) interface{} {
        return "hello world"
    })

    //å¯åŠ¨app
    app.Start()
}
```
- ### 2. æ„å»ºRPCæœåŠ¡

```go
package main

import (
    "github.com/micro-plat/hydra"
    "github.com/micro-plat/hydra/hydra/servers/rpc"
)

func main() {

    //åˆ›å»ºapp
	app := hydra.NewApp(
            hydra.WithServerTypes(rpc.RPC),
    )

    //æ³¨å†ŒæœåŠ¡
    app.RPC("/hello", func(ctx hydra.IContext) interface{} {
        return "hello world"
    })

    //å¯åŠ¨app
    app.Start()
}
```
- ### 3. æ„å»ºå®šæ—¶ä»»åŠ¡æœåŠ¡

```go
package main

import (
    "github.com/micro-plat/hydra"   
    "github.com/micro-plat/hydra/hydra/servers/cron"
)

func main() {

	app := hydra.NewApp(
            hydra.WithServerTypes(cron.CRON),
    )
   
   //æ³¨å†ŒæœåŠ¡
    app.CRON("/hello",hello,"@every 5s")   
    app.Start()
}
func hello(ctx hydra.IContext) interface{} {
        return "success"
}
```
- ### 4. æ„å»ºæ¶ˆæ¯æ¶ˆè´¹æœåŠ¡

```go
package main

import (
    "github.com/micro-plat/hydra"
    "github.com/micro-plat/hydra/hydra/servers/mqc"
    "github.com/micro-plat/hydra/conf/vars/queue/lmq"
)

func main() {

	app := hydra.NewApp(
            hydra.WithServerTypes(mqc.MQC),
    )

    //æ³¨å†ŒæœåŠ¡
    app.MQC("/hello",hello,"queue-name")

    //è®¾ç½®æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨(æœ¬åœ°å†…å­˜MQï¼Œæ”¯æŒredis,mqttç­‰)  
    hydra.Conf.MQC(lmq.MQ)

    app.Start()
}

func hello(ctx hydra.IContext) interface{} {
        return "success"
}
```


## äºŒã€ç»„åˆæœåŠ¡

```go
package main

import (
    "github.com/micro-plat/hydra"   
     "github.com/micro-plat/hydra/hydra/servers/http"
     "github.com/micro-plat/hydra/hydra/servers/cron"
)

func main() {

	app := hydra.NewApp(
            hydra.WithServerTypes(http.API,cron.CRON),
    )

    app.API("/hello",hello)
    app.CRON("/hello",hello,"@every 5s") 
    app.Start()
}
func hello(ctx hydra.IContext) interface{} {
        return "hello world"
}
```


```sh
$ ./flowserver run --plat test
```

æ—¥å¿—å¦‚ä¸‹ï¼š
```sh
[2020/07/08 09:36:31.140432][i][29f63e41d]åˆå§‹åŒ–: /test/flowserver/api-cron/1.0.0/conf
[2020/07/08 09:36:31.143027][i][29f63e41d]å¯åŠ¨[api]æœåŠ¡...
[2020/07/08 09:36:31.643524][i][b65655312]å¯åŠ¨æˆåŠŸ(api,http://192.168.4.121:8080,1)
[2020/07/08 09:36:31.643885][i][29f63e41d]å¯åŠ¨[cron]æœåŠ¡...
[2020/07/08 09:36:31.844844][i][3908a5ccc]å¯åŠ¨æˆåŠŸ(cron,cron://192.168.4.121,1)
[2020/07/08 09:36:32.346047][d][3908a5ccc]å½“å‰serverå¯åŠ¨ä¸º: master
[2020/07/08 09:36:36.648149][i][01751ece6]cron.request: GET /hello from 192.168.4.121
[2020/07/08 09:36:36.648244][i][01751ece6]cron.response: GET /hello 200  193.356Âµs
[2020/07/08 09:36:41.651858][i][00f45e17b]cron.request: GET /hello from 192.168.4.121
[2020/07/08 09:36:41.651911][i][00f45e17b]cron.response: GET /hello 200  159.694Âµs
```

æœåŠ¡å·²å¯åŠ¨ï¼Œcron serverå¼€å§‹å‘¨æœŸ(æ¯éš”5ç§’)æ‰§è¡Œä»»åŠ¡


```sh
$ curl http://192.168.4.121:8080/hello
```
è¿”å›å†…å®¹ï¼š
```sh
hello world
```


## ä¸‰ã€ æœåŠ¡å™¨é…ç½®


#### 1. è®¾ç½®å¹³å°ã€ç³»ç»Ÿã€é›†ç¾¤åç§°

```go
	app := hydra.NewApp(
            hydra.WithPlatName("test"),
            hydra.WithSystemName("apiserver"),
            hydra.WithServerTypes(http.API),
            hydra.WithClusterName("prod"),			
    )
    app.Start()

```

#### 2. è¿è¡Œæ—¶ é€šè¿‡cliå‚æ•°æŒ‡å®šå¹³å°ã€ç³»ç»Ÿã€é›†ç¾¤åç§°

```go
	app := hydra.NewApp(
            hydra.WithServerTypes(http.API),	
    )
    app.Start()

```

#### 3. *API*ç›‘å¬ç«¯å£ï¼š
```go
	hydra.Conf.API("8090")	
```

#### 4. *API*è¶…æ—¶æ—¶é•¿
```go
	hydra.Conf.API("8090", api.WithHeaderReadTimeout(30), api.WithTimeout(30, 30)) 
```

#### 5. ç™½åå•ã€é»‘åå•
```go
    hydra.Conf.API("8080").			
	WhiteList(whitelist.NewIPList("/**", whitelist.WithIP("192.168.4.121"))).
	BlackList(blacklist.WithIP("192.168.4.120"))
```
#### 6. JWTè®¤è¯
- 1. é…ç½®*/member*å¼€å¤´äººè·¯å¾„ä¸éªŒè¯ï¼Œå°†jwtä¸²ä¸²å­˜åˆ°headerä¸­ï¼š
```go
    hydra.Conf.API("8080").Jwt(jwt.WithExcludes("/member/**"), jwt.WithHeader())
```
- 2. ç™»å½•æˆåŠŸè®¾ç½®jwtä¿¡æ¯:

```go
type UserInfo struct{
    Name string `json:"name"`
    UID string `json:"id"`
}


func login(ctx hydra.IContext) interface{} {
    userInfo := UserInfo{UID:"209867923",Name:"colin"}
	ctx.User().Auth().Response(&userInfo)
	return "success"
}

```

- 3. ä»jwtä¸­è·å–ç”¨æˆ·ä¿¡æ¯:
```go
func login(ctx hydra.IContext) interface{} {
     userInfo :=new(UserInfo)
	ctx.User().Auth().Bind(&userInfo)
	return "success"
}
```
#### 7. ç°åº¦å‘å¸ƒ

ä»¥ *202.222.* å¼€å¤´çš„IPï¼Œè½¬å‘åˆ°åç§°ä¸­åŒ…å«*gray*çš„é›†ç¾¤ï¼ˆtengoè„šæœ¬ï¼‰:

```go
	hydra.Conf.API("8090").Proxy(`	
                request := import("request")
                app := import("app")
                text := import("text")
                types :=import("types")
                fmt := import("fmt")

                getUpCluster := func(){
                    ip := request.getClientIP()
                    current:= app.getCurrentClusterName()
                    if text.has_prefix(ip,"202.222."){
                        return app.getClusterNameBy("gray")
                    }
                    return current
                }
                upcluster := getUpCluster()
		`)
```
#### 8. è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼

- 1. å¤„ç†è¾“å‡ºï¼ˆtengoè„šæœ¬ï¼‰ï¼š
```go
    hydra.Conf.API("8070").Render(`
            request := import("request")
            response := import("response")
            text := import("text")
            types :=import("types")

            rc:="<response><code>{@status}</code><msg>{@content}</msg></response>"

            getContent := func(){  
                input:={status:response.getStatus(),content:response.getRaw()["id"]}

                if text.has_prefix(request.getPath(),"/tx/request"){
                    return [200,types.translate(rc,input)]
                }
                if text.has_prefix(request.getPath(),"/tx/query"){
                    return [200,types.translate(rc,input),"text/plain"]
                }
                return [200,response.getContent()]
            }

            render := getContent()
            `)
```

- 2. æœåŠ¡å®ç°
```go
func main() {
	app := hydra.NewApp(
		hydra.WithServerTypes(http.API),
	)

	app.API("/tx/request", request)
	app.API("/tx/query", request)
	app.API("/request", request)
	app.Start()
}
func request(ctx hydra.IContext) interface{} {
	return map[string]interface{}{
		"id": 101010,
	}
}
```

- 3. è¯·æ±‚æœåŠ¡
```sh
~/work/bin$ curl http://localhost:8070/tx/request
<response><code>200</code><msg>101010</msg></response>

~/work/bin$ curl http://localhost:8070/request
{"id":101010}
```

#### 9. æ•°æ®åº“é…ç½®
```go
 hydra.Conf.Vars().DB("db", oracle.New("hydra/hydra"))
```

ä½¿ç”¨æ–¹æ³•:

```go
 func GetUserInfo(id int64)(map[string]interface{},error)
    db:=hydra.C.GetDB()
    userInfo,err:=db.Query("select t.* from user_info t where t.id=@id",map[string]interface{}{"id",id})
    return userInfo,err
```

#### 10. ç¼“å­˜é…ç½®
```go
 hydra.Conf.Vars().Cache("cache", redis.New("192.168.0.109"))
```

ä½¿ç”¨æ–¹æ³•:

```go
 func GetUserInfo(id int64)(string,error)
    cache:=hydra.C.GetCache()
    userInfo,err:=cache.Get(fmt.Sprintf("user:info:%d",id))
    return userInfo,err
```

## å››ã€ æœåŠ¡æ³¨å†Œ

- 1. æœåŠ¡å‡½æ•°
```go
func main() {
	app := hydra.NewApp(
		hydra.WithServerTypes(http.API),
	)
	app.API("/request", request)
	app.Start()
}
func request(ctx hydra.IContext) interface{} {
	return "success"
}
```

- 2. åŒ…å«HandleæœåŠ¡çš„structæ„é€ å‡½æ•°æˆ–å¯¹è±¡

```go
func main() {
	app := hydra.NewApp(
		hydra.WithServerTypes(http.API),
	)
    app.API("/order", NewOrderService)
    //æˆ–
    // app.API("/order", &OrderService{})
	app.Start()
}

type OrderService struct {
}
func NewOrderService()*OrderService{
    return &OrderService{}
}

func (o *OrderService) Handle(ctx hydra.IContext) interface{} {
	ctx.Log().Info("--------è®¢å•å¤„ç†----------"))
	return "success"
}
```

- 3. å¤šä¸ªæœåŠ¡æ³¨å†Œ

```go
func main() {
	app := hydra.NewApp(
		hydra.WithServerTypes(http.API),
	)
	app.API("/order/*", NewOrderService)
	app.Start()
}

type OrderService struct {
}
func NewOrderService()*OrderService{
    return &OrderService{}
}

func (o *OrderService) RequestHandle(ctx hydra.IContext) interface{} {
	ctx.Log().Info("--------æ”¶å•å¤„ç†----------"))
	return "success"
}
func (o *OrderService) QueryHandle(ctx hydra.IContext) interface{} {
	ctx.Log().Info("--------æŸ¥å•å¤„ç†----------"))
	return "success"
}
```
> å®é™…æ³¨å†Œäº†ä¸¤ä¸ªæœåŠ¡ */order/request*,*/order/query*


- 3. RESTfulæœåŠ¡æ³¨å†Œ

```go
func main() {
	app := hydra.NewApp(
		hydra.WithServerTypes(http.API),
	)
	app.API("/product", &ProductService{})
	app.Start()
}

type ProductService struct {
}



func (o *ProductService) GetHandle(ctx hydra.IContext) interface{} {
	ctx.Log().Info("--------æŸ¥è¯¢äº§å“----------"))
	return "success"
}
func (o *ProductService) PostHandle(ctx hydra.IContext) interface{} {
	ctx.Log().Info("--------æ–°å¢äº§å“----------"))
	return "success"
}
func (o *OrderService) PutHandle(ctx hydra.IContext) interface{} {
	ctx.Log().Info("--------ä¿®æ”¹äº§å“----------"))
	return "success"
}
func (o *OrderService) DeleteHandle(ctx hydra.IContext) interface{} {
	ctx.Log().Info("--------ç¦ç”¨äº§å“----------"))
	return "success"
}
```

> å®é™…æ³¨å†Œäº†ä¸€ä¸ªæœåŠ¡ */product*



- 4. é’©å­å‡½æ•°

```go
func main() {
	app := hydra.NewApp(
		hydra.WithServerTypes(http.API),
	)
    app.API("/order", NewOrderService)
	app.Start()
}

type OrderService struct {
}
func NewOrderService()*OrderService{
    return &OrderService{}
}
func (o *OrderService) Handling(ctx hydra.IContext) interface{} {
	ctx.Log().Info("--------é¢„å¤„ç†----------"))
	return "success"
}
func (o *OrderService) Handle(ctx hydra.IContext) interface{} {
	ctx.Log().Info("--------è®¢å•å¤„ç†----------"))
	return "success"
}
func (o *OrderService) Handled(ctx hydra.IContext) interface{} {
	ctx.Log().Info("--------åå¤„ç†----------"))
	return "success"
}

```
## äº”ã€ æœåŠ¡å“åº”


- 1. æ™®é€šå­—ç¬¦ä¸²
```go
func request(ctx hydra.IContext) interface{} {
	return "success"
}
```

> å“åº”å†…å®¹: *success*  
> Content-Type: text/plain; charset=utf-8



- 2. JSONå­—ç¬¦ä¸²

```go
func request(ctx hydra.IContext) interface{} {
	return `{"name":"colin"}`
}
```

> å“åº”å†…å®¹: *{"name":"colin"}*  
> Content-Type: application/json; charset=utf-8


- 3. XMLå­—ç¬¦ä¸²

```go
func request(ctx hydra.IContext) interface{} {
	return `<name>colin</name>`
}
```

> å“åº”å†…å®¹: &#60;name&#62; colin&#60;/name&#62; 
> Content-Type: application/xml; charset=utf-8


- 4. Map
```go
func request(ctx hydra.IContext) interface{} {
	return map[string]interface{}{"name":"colin"}
}
```
> å“åº”å†…å®¹: *{"name":"colin"}*  
> Content-Type: application/json; charset=utf-8

- 5. Struct

```go
func request(ctx hydra.IContext) interface{} {
	return &UserInfo{Name:"colin"}
}
```

> å“åº”å†…å®¹: *{"name":"colin"}*  
> Content-Type: application/json; charset=utf-8


- 6. Map,æŒ‡å®šContentType

```go
func request(ctx hydra.IContext) interface{} {
    ctx.Response().ContentType(context.UTF8XML)
	return map[string]interface{}{"name":"colin"}
}
```

> å“åº”å†…å®¹:  *&#60;name/&#62;colin &#60;name/&#62;*
> Content-Type: application/xml; charset=utf-8


- 7. Struct,æŒ‡å®šContentType

```go
func request(ctx hydra.IContext) interface{} {
    ctx.Response().ContentType(context.UTF8XML)
	return &UserInfo{Name:"colin"}
}
```

> å“åº”å†…å®¹: *&#60;name/&#62;colin &#60;name/&#62;*
> Content-Type: application/xml; charset=utf-8

- 8. æ™®é€šé”™è¯¯

```go
func request(ctx hydra.IContext) interface{} {
   return fmt.Errorf("err")
}
```

> å“åº”å†…å®¹: err
> Content-Type: text/plain; charset=utf-8

- 9. å¸¦çŠ¶æ€ç çš„é”™è¯¯

```go
func request(ctx hydra.IContext) interface{} {
   return errs.New(500,"err")
}
```

> çŠ¶æ€ç : 500
> å“åº”å†…å®¹: err
> Content-Type: text/plain; charset=utf-8



### ğŸ¿ï¸è”ç³»ä½œè€…
![image](https://github.com/micro-plat/hydra/raw/master/imgs/wx-p.png)

### ğŸ’²æèµ  ğŸ¥£
![image](https://github.com/micro-plat/hydra/raw/master/imgs/jz.png)